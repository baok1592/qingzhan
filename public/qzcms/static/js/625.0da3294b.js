"use strict";(self["webpackChunkqz_cms"]=self["webpackChunkqz_cms"]||[]).push([[625],{4787:function(e,l,a){a.d(l,{Kn:function(){return r},M7:function(){return d},QJ:function(){return n},UI:function(){return m},hU:function(){return i},uV:function(){return u},xm:function(){return o}});var t=a(1161);const u=()=>(0,t.Z)({url:"article_all"}),d=e=>(0,t.Z)({url:"article_cid_ctx?cid="+e}),o=e=>(0,t.Z)({url:"article_del?id="+e,method:"DELETE"}),n=e=>(0,t.W)({url:"article_detail?id="+e}),m=e=>(0,t.Z)({url:"article_add",method:"POST",data:e}),r=e=>(0,t.Z)({url:"article_up",method:"POST",data:e}),i=(e,l)=>(0,t.Z)({url:"article_state?type="+e+"&id="+l,method:"PUT"})},9948:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}});var t=a(4645),u=(a(126),a(5969),a(2270),a(6309),a(2521),a(8364),a(4122),a(6972),a(3504),a(5029),a(6826),a(2262)),d=a(6252),o=(a(6227),a(5288)),n=a(2321),m=a(9546),r=a(489),i=a(4317),c=a(3236),s=a(2723),f=a(3276),_=a(865),p=a(3424),w=a(4787),U=a(5088),W=a(961),v=a(8611),V=a(3127);const S={class:"page-article-add right-main"},g={class:"top-back flex mb-4"},y=(0,d.Uk)(" 返 回"),h={class:"ctx_add py-2"},k=["src"],b={class:"editBox"},C=(0,d.Uk)(" 提交 "),Z=(0,d.Uk)(" 提交修改 ");var j=(0,d.aZ)({setup(e){const{Editor:l,Toolbar:a,editorRef:j,mode:H,toolbarConfig:D,editorConfig:x,handleCreated:q,getToolInfo:P}=(0,v.r)(),T=(0,u.iH)(!1),Y=(0,u.iH)(),E=(0,u.iH)([]),z=(0,u.iH)(),I=(0,u.iH)(!1);let R=0;(0,d.bv)((()=>{z.value=(0,V.y)(),U.ZP.currentRoute.value&&U.ZP.currentRoute.value.query.id&&(R=U.ZP.currentRoute.value.query.id,K(R))}));const K=async e=>{const l=await(0,w.QJ)(e);l.date=1e3*l.date,L.data=l,B.value=!!l.jump_url,I.value=!0,E.value=[l.url]},M=(e,l)=>{E.value=l,L.data.img_id=e[0]},O=()=>{Y.value=1,T.value=!0},B=(0,u.iH)(!1),L=(0,u.qj)({data:{title:"",short_title:"",desc:"",content:"",img_id:0,date:new Date,source:"",category_id:0,jump_url:""}}),A=()=>{B.value?L.data.content="":L.data.jump_url="",L.data.date=Math.round(L.data.date/1e3),(0,w.UI)(L.data).then((e=>{t.z8.success("创建成功"),U.ZP.push("/article/list")}))},J=()=>{let e=(0,u.IU)(L.data);B.value||(e.jump_url=""),e.id=R,e.date=e.date/1e3,(0,w.Kn)(e).then((e=>{t.z8.success("修改成功"),U.ZP.push("/article/list")}))};return(e,t)=>{const w=(0,d.up)("ArrowLeft"),U=_.gn,v=f.mi,V=(0,d.up)("router-link"),P=s.EZ,R=o.nH,K=c.Dv,Q=i.Xb,F=r.dq,X=m.BT,G=m.km,N=n.i,$=(0,d.up)("plus"),ee=o.ly;return(0,d.wg)(),(0,d.iD)("div",S,[(0,d._)("div",g,[(0,d.Wm)(V,{to:"/article/list"},{default:(0,d.w5)((()=>[(0,d.Wm)(v,{type:"primary"},{default:(0,d.w5)((()=>[(0,d.Wm)(U,null,{default:(0,d.w5)((()=>[(0,d.Wm)(w)])),_:1}),y])),_:1})])),_:1})]),(0,d._)("div",h,[(0,d.Wm)(ee,{model:(0,u.SU)(L),"label-width":"100px"},{default:(0,d.w5)((()=>[(0,d.Wm)(F,null,{default:(0,d.w5)((()=>[(0,d.Wm)(K,{span:14},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"标题"},{default:(0,d.w5)((()=>[(0,d.Wm)(P,{modelValue:(0,u.SU)(L).data.title,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,u.SU)(L).data.title=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,d.Wm)(K,{span:8},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"短标题"},{default:(0,d.w5)((()=>[(0,d.Wm)(P,{modelValue:(0,u.SU)(L).data.short_title,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,u.SU)(L).data.short_title=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,d.Wm)(K,{span:2},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"跳转"},{default:(0,d.w5)((()=>[(0,d.Wm)(Q,{modelValue:B.value,"onUpdate:modelValue":t[2]||(t[2]=e=>B.value=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,d.Wm)(F,null,{default:(0,d.w5)((()=>[B.value?((0,d.wg)(),(0,d.j4)(K,{key:0,span:16},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"跳转到"},{default:(0,d.w5)((()=>[(0,d.Wm)(P,{modelValue:(0,u.SU)(L).data.jump_url,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,u.SU)(L).data.jump_url=e),placeholder:"请输入网址"},null,8,["modelValue"])])),_:1})])),_:1})):(0,d.kq)("",!0)])),_:1}),(0,d.Wm)(F,null,{default:(0,d.w5)((()=>[(0,d.Wm)(K,{span:8},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"栏目"},{default:(0,d.w5)((()=>[(0,d.Wm)(G,{modelValue:(0,u.SU)(L).data.category_id,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,u.SU)(L).data.category_id=e),placeholder:""},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(z.value,(e=>((0,d.wg)(),(0,d.iD)(d.HY,{key:e.id},["lists"==e.type?((0,d.wg)(),(0,d.j4)(X,{key:0,label:e.name,value:e.id},null,8,["label","value"])):(0,d.kq)("",!0)],64)))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,d.Wm)(K,{span:8},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"发布时间"},{default:(0,d.w5)((()=>[(0,d.Wm)(N,{modelValue:(0,u.SU)(L).data.date,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,u.SU)(L).data.date=e),format:"YYYY-MM-DD HH:mm",type:"datetime",placeholder:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,d.Wm)(K,{span:8},{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"来源"},{default:(0,d.w5)((()=>[(0,d.Wm)(P,{modelValue:(0,u.SU)(L).data.source,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,u.SU)(L).data.source=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,d.Wm)(R,{label:"文章摘要"},{default:(0,d.w5)((()=>[(0,d.Wm)(P,{modelValue:(0,u.SU)(L).data.desc,"onUpdate:modelValue":t[7]||(t[7]=e=>(0,u.SU)(L).data.desc=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,d.Wm)(F,null,{default:(0,d.w5)((()=>[(0,d.Wm)(R,{label:"缩略图"},{default:(0,d.w5)((()=>[(0,d._)("div",{class:"select-img",onClick:O},[""===E.value.toString()?((0,d.wg)(),(0,d.j4)(U,{key:0,size:30},{default:(0,d.w5)((()=>[(0,d.Wm)($)])),_:1})):((0,d.wg)(!0),(0,d.iD)(d.HY,{key:1},(0,d.Ko)(E.value,(e=>((0,d.wg)(),(0,d.iD)("img",{key:e,class:"w-full h-full",src:(0,u.SU)(W.v).BASE_URL+e},null,8,k)))),128))])])),_:1})])),_:1}),(0,d.Wm)(R,null,{default:(0,d.w5)((()=>[(0,d._)("div",b,[(0,d.Wm)((0,u.SU)(a),{class:"editTool",editor:(0,u.SU)(j),defaultConfig:(0,u.SU)(D),mode:(0,u.SU)(H)},null,8,["editor","defaultConfig","mode"]),(0,d.Wm)((0,u.SU)(l),{class:"editCtx",style:{height:"400px"},modelValue:(0,u.SU)(L).data.content,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,u.SU)(L).data.content=e),defaultConfig:(0,u.SU)(x),mode:(0,u.SU)(H),onOnCreated:(0,u.SU)(q)},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])])),_:1}),(0,d.Wm)(R,null,{default:(0,d.w5)((()=>[I.value?((0,d.wg)(),(0,d.j4)(v,{key:1,type:"primary",onClick:J},{default:(0,d.w5)((()=>[Z])),_:1})):((0,d.wg)(),(0,d.j4)(v,{key:0,type:"primary",onClick:A},{default:(0,d.w5)((()=>[C])),_:1}))])),_:1})])),_:1},8,["model"])]),(0,d.Wm)(p.Z,{ref:"lib",modelValue:T.value,"onUpdate:modelValue":t[9]||(t[9]=e=>T.value=e),num:Y.value,fatherFun:M},null,8,["modelValue","num"])])}}}),H=a(3744);const D=(0,H.Z)(j,[["__scopeId","data-v-192ec3aa"]]);var x=D}}]);