"use strict";(self["webpackChunkqz_cms"]=self["webpackChunkqz_cms"]||[]).push([[562],{1675:function(e,n,t){t.d(n,{WZ:function(){return Y}});var a=t(6252),l=t(2262),i=t(9963),o=t(3577),u=t(3967),s=t(771),r=t(8891),c=t(7226),f="Expected a function";function d(e,n,t){var a=!0,l=!0;if("function"!=typeof e)throw new TypeError(f);return(0,c.Z)(t)&&(a="leading"in t?!!t.leading:a,l="trailing"in t?!!t.trailing:l),(0,r.Z)(e,n,{leading:a,maxWait:n,trailing:l})}var v=d,m=t(865),p=t(2480),g=t(1980),w=t(2964),_=t(9048),b=t(5325),S=t(4278),k=t(6109),U=t(531),h=t(3518),C=t(6236),W=t(3911);const y=(0,C.o8)({urlList:{type:(0,C.Cq)(Array),default:()=>(0,W.N)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),x={close:()=>!0,switch:e=>"number"===typeof e};var I=t(1454);const O=()=>s.C5&&/firefox/i.test(window.navigator.userAgent);var T=t(9216),Z=t(3510),z=t(7083),N=t(5762);const R=["src"],A={name:"ElImageViewer"},H=(0,a.aZ)({...A,props:y,emits:x,setup(e,{emit:n}){const t=e,r={CONTAIN:{name:"contain",icon:(0,l.Xl)(p.Z)},ORIGINAL:{name:"original",icon:(0,l.Xl)(g.Z)}},c=O()?"DOMMouseScroll":"mousewheel",{t:f}=(0,T.bU)(),d=(0,Z.s)("image-viewer"),{nextZIndex:C}=(0,z.C)(),W=(0,l.iH)(),y=(0,l.iH)([]),x=(0,l.B)(),I=(0,l.iH)(!0),A=(0,l.iH)(t.initialIndex),H=(0,l.iH)(r.CONTAIN),L=(0,l.iH)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),D=(0,a.Fl)((()=>{const{urlList:e}=t;return e.length<=1})),Y=(0,a.Fl)((()=>0===A.value)),$=(0,a.Fl)((()=>A.value===t.urlList.length-1)),E=(0,a.Fl)((()=>t.urlList[A.value])),B=(0,a.Fl)((()=>{const{scale:e,deg:n,offsetX:t,offsetY:a,enableTransition:l}=L.value;let i=t/e,o=a/e;switch(n%360){case 90:case-270:[i,o]=[o,-i];break;case 180:case-180:[i,o]=[-i,-o];break;case 270:case-90:[i,o]=[-o,i];break}const u={transform:`scale(${e}) rotate(${n}deg) translate(${i}px, ${o}px)`,transition:l?"transform .3s":""};return H.value.name===r.CONTAIN.name&&(u.maxWidth=u.maxHeight="100%"),u})),F=(0,a.Fl)((()=>(0,s.hj)(t.zIndex)?t.zIndex:C()));function j(){V(),n("close")}function q(){const e=v((e=>{switch(e.code){case N.n.esc:t.closeOnPressEscape&&j();break;case N.n.space:G();break;case N.n.left:J();break;case N.n.up:ee("zoomIn");break;case N.n.right:Q();break;case N.n.down:ee("zoomOut");break}})),n=v((e=>{const n=e.wheelDelta?e.wheelDelta:-e.detail;ee(n>0?"zoomIn":"zoomOut",{zoomRate:1.2,enableTransition:!1})}));x.run((()=>{(0,u.ORN)(document,"keydown",e),(0,u.ORN)(document,c,n)}))}function V(){x.stop()}function X(){I.value=!1}function M(e){I.value=!1,e.target.alt=f("el.image.error")}function P(e){if(I.value||0!==e.button||!W.value)return;L.value.enableTransition=!1;const{offsetX:n,offsetY:t}=L.value,a=e.pageX,l=e.pageY,i=v((e=>{L.value={...L.value,offsetX:n+e.pageX-a,offsetY:t+e.pageY-l}})),o=(0,u.ORN)(document,"mousemove",i);(0,u.ORN)(document,"mouseup",(()=>{o()})),e.preventDefault()}function K(){L.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function G(){if(I.value)return;const e=Object.keys(r),n=Object.values(r),t=H.value.name,a=n.findIndex((e=>e.name===t)),l=(a+1)%e.length;H.value=r[e[l]],K()}function J(){if(Y.value&&!t.infinite)return;const e=t.urlList.length;A.value=(A.value-1+e)%e}function Q(){if($.value&&!t.infinite)return;const e=t.urlList.length;A.value=(A.value+1)%e}function ee(e,n={}){if(I.value)return;const{zoomRate:t,rotateDeg:a,enableTransition:l}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...n};switch(e){case"zoomOut":L.value.scale>.2&&(L.value.scale=Number.parseFloat((L.value.scale/t).toFixed(3)));break;case"zoomIn":L.value.scale<7&&(L.value.scale=Number.parseFloat((L.value.scale*t).toFixed(3)));break;case"clockwise":L.value.deg+=a;break;case"anticlockwise":L.value.deg-=a;break}L.value.enableTransition=l}return(0,a.YP)(E,(()=>{(0,a.Y3)((()=>{const e=y.value[0];(null==e?void 0:e.complete)||(I.value=!0)}))})),(0,a.YP)(A,(e=>{K(),n("switch",e)})),(0,a.bv)((()=>{var e,n;q(),null==(n=null==(e=W.value)?void 0:e.focus)||n.call(e)})),(e,n)=>((0,a.wg)(),(0,a.j4)(a.lR,{to:"body",disabled:!e.teleported},[(0,a.Wm)(i.uT,{name:"viewer-fade",appear:""},{default:(0,a.w5)((()=>[(0,a._)("div",{ref_key:"wrapper",ref:W,tabindex:-1,class:(0,o.C_)((0,l.SU)(d).e("wrapper")),style:(0,o.j5)({zIndex:(0,l.SU)(F)})},[(0,a._)("div",{class:(0,o.C_)((0,l.SU)(d).e("mask")),onClick:n[0]||(n[0]=(0,i.iM)((n=>e.hideOnClickModal&&j()),["self"]))},null,2),(0,a.kq)(" CLOSE "),(0,a._)("span",{class:(0,o.C_)([(0,l.SU)(d).e("btn"),(0,l.SU)(d).e("close")]),onClick:j},[(0,a.Wm)((0,l.SU)(m.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(w.Z))])),_:1})],2),(0,a.kq)(" ARROW "),(0,l.SU)(D)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",{class:(0,o.C_)([(0,l.SU)(d).e("btn"),(0,l.SU)(d).e("prev"),(0,l.SU)(d).is("disabled",!e.infinite&&(0,l.SU)(Y))]),onClick:J},[(0,a.Wm)((0,l.SU)(m.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(_.Z))])),_:1})],2),(0,a._)("span",{class:(0,o.C_)([(0,l.SU)(d).e("btn"),(0,l.SU)(d).e("next"),(0,l.SU)(d).is("disabled",!e.infinite&&(0,l.SU)($))]),onClick:Q},[(0,a.Wm)((0,l.SU)(m.gn),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(b.Z))])),_:1})],2)],64)),(0,a.kq)(" ACTIONS "),(0,a._)("div",{class:(0,o.C_)([(0,l.SU)(d).e("btn"),(0,l.SU)(d).e("actions")])},[(0,a._)("div",{class:(0,o.C_)((0,l.SU)(d).e("actions__inner"))},[(0,a.Wm)((0,l.SU)(m.gn),{onClick:n[1]||(n[1]=e=>ee("zoomOut"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(S.Z))])),_:1}),(0,a.Wm)((0,l.SU)(m.gn),{onClick:n[2]||(n[2]=e=>ee("zoomIn"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(k.Z))])),_:1}),(0,a._)("i",{class:(0,o.C_)((0,l.SU)(d).e("actions__divider"))},null,2),(0,a.Wm)((0,l.SU)(m.gn),{onClick:G},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(H.value.icon)))])),_:1}),(0,a._)("i",{class:(0,o.C_)((0,l.SU)(d).e("actions__divider"))},null,2),(0,a.Wm)((0,l.SU)(m.gn),{onClick:n[3]||(n[3]=e=>ee("anticlockwise"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(U.Z))])),_:1}),(0,a.Wm)((0,l.SU)(m.gn),{onClick:n[4]||(n[4]=e=>ee("clockwise"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,l.SU)(h.Z))])),_:1})],2)],2),(0,a.kq)(" CANVAS "),(0,a._)("div",{class:(0,o.C_)((0,l.SU)(d).e("canvas"))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.urlList,((e,n)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("img",{ref_for:!0,ref:e=>y.value[n]=e,key:e,src:e,style:(0,o.j5)((0,l.SU)(B)),class:(0,o.C_)((0,l.SU)(d).e("img")),onLoad:X,onError:M,onMousedown:P},null,46,R)),[[i.F8,n===A.value]]))),128))],2),(0,a.WI)(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}});var L=(0,I.Z)(H,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]),D=t(4308);const Y=(0,D.nz)(L)},5982:function(e,n,t){t(4991)},2796:function(e,n,t){t.d(n,{e1:function(){return i},yv:function(){return l}});var a=t(1161);const l=e=>(0,a.Z)({url:"resource_dels",method:"POST",data:{type:"img",ids:e}}),i=()=>(0,a.Z)({url:"resource_type?type=img"})},5874:function(e,n,t){t.d(n,{W:function(){return s}});var a=t(2262),l=(t(6699),t(4645)),i=t(7764),o=t(2796),u=t(961);function s(){const e=(0,a.iH)(),n=(0,a.iH)(100),t=(0,a.iH)(!1),s=(0,a.iH)([]);function r(e){const t=s.value.indexOf(e);if(t>-1)s.value.splice(t,1);else{if(s.value.length>=n.value)return void l.z8.error("超出限制数量："+n.value);s.value.push(e)}}function c(e){return s.value.includes(e)}const f=e=>{i.T.confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,o.yv)(s.value.toString()).then((n=>{l.z8.success("删除成功"),e()}))}))};function d(n){e.value=[u.v.BASE_URL+n],t.value=!0}function v(){t.value=!1}return{viewImg:e,isShowImage:t,delIds:s,setRadio:r,cmpRadio:c,del:f,setViewImg:d,closeImgViewer:v,limit:n}}},4598:function(e,n,t){t.r(n),t.d(n,{default:function(){return y}});t(5982),t(6844),t(4804),t(2521),t(4122),t(5301),t(6826),t(5029);var a=t(2262),l=t(6252),i=t(1675),o=t(7890),u=t(489),s=t(3236),r=t(6317),c=t(865),f=t(3276),d=t(3577),v=t(2796),m=t(2553),p=t(961),g=t(5874);const w=e=>((0,l.dD)("data-v-4cecccec"),e=e(),(0,l.Cn)(),e),_={class:"page-datamanage right-main"},b={class:"options-btn flex justify-between"},S=w((()=>(0,l._)("div",null,null,-1))),k={class:"pic-tab"},U=["src","onClick"];var h=(0,l.aZ)({setup(e){const n=(0,m.L)();let t=p.v.BASE_API+"/img_add?cid=1";const w={Authorization:"Bearer "+n.getToken},h=(0,a.iH)("first"),C=(0,a.iH)();(0,l.bv)((()=>{W()}));const W=()=>{(0,v.e1)().then((e=>{C.value=e}))},{viewImg:y,isShowImage:x,delIds:I,setRadio:O,cmpRadio:T,del:Z,setViewImg:z,closeImgViewer:N}=(0,g.W)();return(e,n)=>{const v=f.mi,m=(0,l.up)("Plus"),g=c.gn,I=r.LW,R=s.Dv,A=(0,l.up)("zoom-in"),H=u.dq,L=o.p8,D=o.Ub,Y=i.WZ;return(0,l.wg)(),(0,l.iD)("div",_,[(0,l.Wm)(D,{modelValue:h.value,"onUpdate:modelValue":n[1]||(n[1]=e=>h.value=e),type:"card",class:"demo-tabs"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{label:e.$t("msg.profile.picture"),name:"first"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{"tab-position":"left",style:{height:"200px"},class:"demo-tabs"},{default:(0,l.w5)((()=>[(0,l._)("div",b,[S,(0,l._)("div",null,[(0,l.Wm)(v,{type:"danger",onClick:n[0]||(n[0]=e=>(0,a.SU)(Z)(W))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.$t("msg.table.remove")),1)])),_:1})])]),(0,l.Wm)(L,{label:e.$t("msg.profile.all")},{default:(0,l.w5)((()=>[(0,l._)("div",k,[(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Wm)(R,{span:2},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{class:"avatar-uploader",action:(0,a.SU)(t),"show-file-list":!1,headers:w,"on-success":W},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"avatar-uploader-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1})])),_:1},8,["action"])])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(C.value,(e=>((0,l.wg)(),(0,l.j4)(R,{span:2,key:e.id,class:"text-center"},{default:(0,l.w5)((()=>[(0,l._)("img",{style:{width:"100px",height:"100px"},src:(0,a.SU)(p.v).BASE_URL+e.url,class:(0,d.C_)((0,a.SU)(T)(e.id)?"radio":""),onClick:n=>(0,a.SU)(O)(e.id)},null,10,U),(0,l.Wm)(v,{type:"small",onClick:n=>(0,a.SU)(z)(e.url)},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(A)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])])),_:1},8,["label"])])),_:1})])),_:1},8,["label"]),(0,l.Wm)(L,{label:e.$t("msg.profile.video"),name:"second"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.$t("msg.profile.null")),1)])),_:1},8,["label"])])),_:1},8,["modelValue"]),(0,a.SU)(x)?((0,l.wg)(),(0,l.j4)(Y,{key:0,onClose:(0,a.SU)(N),"url-list":(0,a.SU)(y)},null,8,["onClose","url-list"])):(0,l.kq)("",!0)])}}}),C=t(3744);const W=(0,C.Z)(h,[["__scopeId","data-v-4cecccec"]]);var y=W},8891:function(e,n,t){t.d(n,{Z:function(){return W}});var a=t(7226),l=t(6092),i=function(){return l.Z.Date.now()},o=i,u=/\s/;function s(e){var n=e.length;while(n--&&u.test(e.charAt(n)));return n}var r=s,c=/^\s+/;function f(e){return e?e.slice(0,r(e)+1).replace(c,""):e}var d=f,v=t(2714),m=NaN,p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,w=/^0o[0-7]+$/i,_=parseInt;function b(e){if("number"==typeof e)return e;if((0,v.Z)(e))return m;if((0,a.Z)(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=(0,a.Z)(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=d(e);var t=g.test(e);return t||w.test(e)?_(e.slice(2),t?2:8):p.test(e)?m:+e}var S=b,k="Expected a function",U=Math.max,h=Math.min;function C(e,n,t){var l,i,u,s,r,c,f=0,d=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError(k);function p(n){var t=l,a=i;return l=i=void 0,f=n,s=e.apply(a,t),s}function g(e){return f=e,r=setTimeout(b,n),d?p(e):s}function w(e){var t=e-c,a=e-f,l=n-t;return v?h(l,u-a):l}function _(e){var t=e-c,a=e-f;return void 0===c||t>=n||t<0||v&&a>=u}function b(){var e=o();if(_(e))return C(e);r=setTimeout(b,w(e))}function C(e){return r=void 0,m&&l?p(e):(l=i=void 0,s)}function W(){void 0!==r&&clearTimeout(r),f=0,l=c=i=r=void 0}function y(){return void 0===r?s:C(o())}function x(){var e=o(),t=_(e);if(l=arguments,i=this,c=e,t){if(void 0===r)return g(c);if(v)return clearTimeout(r),r=setTimeout(b,n),p(c)}return void 0===r&&(r=setTimeout(b,n)),s}return n=S(n)||0,(0,a.Z)(t)&&(d=!!t.leading,v="maxWait"in t,u=v?U(S(t.maxWait)||0,n):u,m="trailing"in t?!!t.trailing:m),x.cancel=W,x.flush=y,x}var W=C}}]);