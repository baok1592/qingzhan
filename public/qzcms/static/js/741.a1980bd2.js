"use strict";(self["webpackChunkqz_cms"]=self["webpackChunkqz_cms"]||[]).push([[741],{4787:function(e,l,a){a.d(l,{Kn:function(){return m},M7:function(){return d},QJ:function(){return o},UI:function(){return r},hU:function(){return i},uV:function(){return u},xm:function(){return n}});var t=a(1161);const u=()=>(0,t.Z)({url:"article_all"}),d=e=>(0,t.Z)({url:"article_cid_ctx?cid="+e}),n=e=>(0,t.Z)({url:"article_del?id="+e,method:"DELETE"}),o=e=>(0,t.W)({url:"article_detail?id="+e}),r=e=>(0,t.Z)({url:"article_add",method:"POST",data:e}),m=e=>(0,t.Z)({url:"article_up",method:"POST",data:e}),i=(e,l)=>(0,t.Z)({url:"article_state?type="+e+"&id="+l,method:"PUT"})},7191:function(e,l,a){a.d(l,{$w:function(){return m},CI:function(){return u},FR:function(){return r},QA:function(){return c},U$:function(){return i},dK:function(){return d},gF:function(){return o},m:function(){return n}});var t=a(1161);const u=(e="")=>{let l="category_list";return""!==e&&(l="category_list?type="+e),(0,t.Z)({url:l})},d=e=>(0,t.Z)({url:"category_up_sort",method:"POST",data:e}),n=e=>(0,t.Z)({url:"category_add",method:"POST",data:e}),o=e=>(0,t.Z)({url:"category_update",method:"POST",data:e}),r=e=>(0,t.W)({url:"category_id?id="+e}),m=e=>(0,t.Z)({url:"category_del?id="+e,method:"DELETE"}),i=(e,l)=>(0,t.Z)({url:"category_state?type="+e+"&id="+l,method:"PUT"}),c=(e,l)=>(0,t.Z)({url:"up_home_tmp_ids?pid="+e+"&mid="+l,method:"PUT"})},3194:function(e,l,a){a.d(l,{HU:function(){return m},LY:function(){return o},Lo:function(){return u},SU:function(){return r},iQ:function(){return n},nn:function(){return d},qY:function(){return i},xO:function(){return c}});var t=a(1161);const u=()=>(0,t.Z)({url:"mb_template"}),d=e=>(0,t.Z)({url:"mb_tmp_detail?id="+e}),n=e=>(0,t.Z)({url:"mb_template_add",method:"POST",data:e}),o=e=>(0,t.Z)({url:"mb_template_up_name?id="+e.id+"&name="+e.name,method:"PUT"}),r=e=>(0,t.Z)({url:"mb_template_up",method:"POST",data:e}),m=e=>(0,t.Z)({url:"mb_template_del?id="+e,method:"DELETE"}),i=()=>(0,t.Z)({url:"mb_navs_all"}),c=e=>(0,t.Z)({url:"mb_navs_up",method:"POST",data:e})},8994:function(e,l,a){a.d(l,{IB:function(){return n},PH:function(){return m},Rc:function(){return i},Z_:function(){return o},Zd:function(){return u},Zf:function(){return d},n1:function(){return r}});var t=a(1161);const u=()=>(0,t.Z)({url:"pc_template"}),d=()=>(0,t.Z)({url:"home_temp"}),n=e=>(0,t.Z)({url:"pc_tmp_detail?id="+e}),o=e=>(0,t.Z)({url:"pc_template_add",method:"POST",data:e}),r=e=>(0,t.Z)({url:"pc_template_up_name?id="+e.id+"&name="+e.name,method:"PUT"}),m=e=>(0,t.Z)({url:"pc_template_up",method:"POST",data:e}),i=e=>(0,t.Z)({url:"pc_template_del?id="+e,method:"DELETE"})},4344:function(e,l,a){a.d(l,{$o:function(){return i},Mx:function(){return f},Ns:function(){return o},X5:function(){return c},_x:function(){return _},a9:function(){return m},qB:function(){return r}});var t=a(2262),u=a(6252),d=a(4787),n=a(7191);const o=[{name:"首页",en:"home"},{name:"列表",en:"lists"},{name:"图集",en:"cards"},{name:"产品",en:"pros"},{name:"封面",en:"cover"}],r=e=>{let l="--";return o.forEach((a=>{a.en==e&&(l=a.name)})),l},m=[{name:"封面",en:"cover"},{name:"文章列表",en:"lists"},{name:"图集列表",en:"cards"},{name:"产品列表",en:"pros"},{name:"首页",en:"home"}],i=e=>{const l={};return m.forEach((e=>{l[e.en]=e.name})),e in l?l[e]:"--"},c=[{name:"栏目",en:"category"},{name:"文章",en:"lists"}],_=(0,t.iH)(),f=(0,t.iH)();(0,u.YP)(f,(e=>{console.log("v:",e),"category"===e&&p(),"lists"===e&&s()}));const p=()=>{(0,n.CI)().then((e=>{_.value=e}))},s=()=>{(0,d.uV)().then((e=>{_.value=e}))}},9443:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}});a(126),a(6844),a(4804),a(2270),a(6309),a(2521),a(8364),a(4122),a(6972),a(3504),a(5029),a(6826);var t=a(2262),u=a(6252),d=a(5288),n=a(7890),o=a(9546),r=a(489),m=a(4317),i=a(3236),c=a(2723),_=a(3276),f=a(865),p=a(4344),s=a(5793),w=a(4645),y=a(3424),U=a(961),v=a(7191),g=a(5088),h=a(8611),S=a(8994),b=a(3194);const W={class:"page-category-add right-main"},k={class:"top-back flex mb-4"},Z=(0,u.Uk)(" 返 回"),V={class:"ctx_add py-2"},H={style:{width:"70%"}},P=(0,u.Uk)("跳转"),T=["src"],E={class:"editBox"},C=(0,u.Uk)(" 提交 "),j=(0,u.Uk)(" 提交修改 ");var O=(0,u.aZ)({setup(e){const{Editor:l,Toolbar:a,editorRef:O,mode:q,toolbarConfig:D,editorConfig:x,handleCreated:Y,getToolInfo:L}=(0,h.r)();let R=0;(0,t.iH)("");const I=(0,t.iH)(!1),K=(0,t.iH)(!1),z=(0,t.iH)(),B=(0,t.iH)(),F=(0,t.iH)(),A=(0,t.iH)(!1),Q=(0,t.iH)(),$=(0,t.iH)([]),M=(0,t.qj)({data:{name:"",type:"",diy_id:0,ctx_id:0,img_id:0,mb_diy_id:0,mb_ctx_id:0,pid:0,jump_url:"",seotitle:"",keyword:"",desc:"",content:""}});(0,u.bv)((()=>{z.value=s.t.get("Category"),(0,S.Zd)().then((e=>{B.value=e})),(0,b.Lo)().then((e=>{F.value=e})),g.ZP.currentRoute.value&&g.ZP.currentRoute.value.query.id&&(R=g.ZP.currentRoute.value.query.id,X(R))}));const X=async e=>{let l=await(0,v.FR)(e);M.data=l,I.value=!!l.jump_url,K.value=!0,$.value=[l.url]},J=((0,t.iH)({}),()=>{I.value||(M.data.jump_url=""),(0,v.m)(M.data).then((e=>{w.z8.success("创建成功"),g.ZP.push("/category/list")}))}),N=()=>{let e=(0,t.IU)(M.data);I.value||(e.jump_url=""),e.id=R,(0,v.gF)(e).then((e=>{w.z8.success("修改成功"),g.ZP.push("/category/list")}))},G=(e,l)=>{$.value=l,M.data.img_id=e[0]},ee=()=>{Q.value=1,A.value=!0};return(e,s)=>{const w=(0,u.up)("ArrowLeft"),v=f.gn,g=_.mi,h=(0,u.up)("router-link"),S=c.EZ,b=d.nH,L=i.Dv,R=m.Xb,X=r.dq,le=o.BT,ae=o.km,te=(0,u.up)("plus"),ue=n.p8,de=n.Ub,ne=d.ly;return(0,u.wg)(),(0,u.iD)("div",W,[(0,u._)("div",k,[(0,u.Wm)(h,{to:"/category/list"},{default:(0,u.w5)((()=>[(0,u.Wm)(g,{type:"primary"},{default:(0,u.w5)((()=>[(0,u.Wm)(v,null,{default:(0,u.w5)((()=>[(0,u.Wm)(w)])),_:1}),Z])),_:1})])),_:1})]),(0,u._)("div",V,[(0,u.Wm)(ne,{model:(0,t.SU)(M),"label-width":"140px"},{default:(0,u.w5)((()=>[(0,u.Wm)(de,null,{default:(0,u.w5)((()=>[(0,u.Wm)(ue,{label:"栏目信息"},{default:(0,u.w5)((()=>[(0,u._)("div",H,[(0,u.Wm)(X,null,{default:(0,u.w5)((()=>[(0,u.Wm)(L,{span:18},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"栏目名称"},{default:(0,u.w5)((()=>[(0,u.Wm)(S,{modelValue:(0,t.SU)(M).data.name,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,t.SU)(M).data.name=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,u.Wm)(L,{span:4},{default:(0,u.w5)((()=>[(0,u.Wm)(b,null,{default:(0,u.w5)((()=>[(0,u.Wm)(R,{modelValue:I.value,"onUpdate:modelValue":s[1]||(s[1]=e=>I.value=e)},{default:(0,u.w5)((()=>[P])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),I.value?((0,u.wg)(),(0,u.j4)(X,{key:0},{default:(0,u.w5)((()=>[(0,u.Wm)(L,{span:18},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"跳转到"},{default:(0,u.w5)((()=>[(0,u.Wm)(S,{modelValue:(0,t.SU)(M).data.jump_url,"onUpdate:modelValue":s[2]||(s[2]=e=>(0,t.SU)(M).data.jump_url=e),placeholder:"请输入网址"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):(0,u.kq)("",!0),(0,u.Wm)(X,null,{default:(0,u.w5)((()=>[(0,u.Wm)(L,{span:8},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"栏目类型"},{default:(0,u.w5)((()=>[(0,u.Wm)(ae,{modelValue:(0,t.SU)(M).data.type,"onUpdate:modelValue":s[3]||(s[3]=e=>(0,t.SU)(M).data.type=e),placeholder:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,t.SU)(p.a9),(e=>((0,u.wg)(),(0,u.iD)(u.HY,{key:e.id},["home"!=e.en?((0,u.wg)(),(0,u.j4)(le,{key:0,label:e.name,value:e.en},null,8,["label","value"])):(0,u.kq)("",!0)],64)))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,u.Wm)(L,{span:8},{default:(0,u.w5)((()=>[I.value?(0,u.kq)("",!0):((0,u.wg)(),(0,u.j4)(b,{key:0,label:"PC模板"},{default:(0,u.w5)((()=>[(0,u.Wm)(ae,{modelValue:(0,t.SU)(M).data.diy_id,"onUpdate:modelValue":s[4]||(s[4]=e=>(0,t.SU)(M).data.diy_id=e),placeholder:"",disabled:""===(0,t.SU)(M).data.type},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(B.value,(e=>((0,u.wg)(),(0,u.iD)(u.HY,{key:e.id},[(0,t.SU)(M).data.type==e.type?((0,u.wg)(),(0,u.j4)(le,{key:0,label:e.name,value:e.id},null,8,["label","value"])):(0,u.kq)("",!0)],64)))),128))])),_:1},8,["modelValue","disabled"])])),_:1}))])),_:1}),(0,u.Wm)(L,{span:8},{default:(0,u.w5)((()=>[I.value?(0,u.kq)("",!0):((0,u.wg)(),(0,u.j4)(b,{key:0,label:"手机模板"},{default:(0,u.w5)((()=>[(0,u.Wm)(ae,{modelValue:(0,t.SU)(M).data.mb_diy_id,"onUpdate:modelValue":s[5]||(s[5]=e=>(0,t.SU)(M).data.mb_diy_id=e),placeholder:"",disabled:""===(0,t.SU)(M).data.type},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(F.value,(e=>((0,u.wg)(),(0,u.iD)(u.HY,{key:e.id},[(0,t.SU)(M).data.type==e.type?((0,u.wg)(),(0,u.j4)(le,{key:0,label:e.name,value:e.id},null,8,["label","value"])):(0,u.kq)("",!0)],64)))),128))])),_:1},8,["modelValue","disabled"])])),_:1}))])),_:1})])),_:1}),(0,u.Wm)(X,null,{default:(0,u.w5)((()=>[(0,u.Wm)(L,{span:8},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"缩略图"},{default:(0,u.w5)((()=>[(0,u._)("div",{class:"w-25 h-25 border-1 border-gray-300 leading-25 text-center",onClick:ee},[""===$.value.toString()?((0,u.wg)(),(0,u.j4)(v,{key:0,size:30},{default:(0,u.w5)((()=>[(0,u.Wm)(te)])),_:1})):((0,u.wg)(!0),(0,u.iD)(u.HY,{key:1},(0,u.Ko)($.value,(e=>((0,u.wg)(),(0,u.iD)("img",{key:e,class:"w-full h-full",src:(0,t.SU)(U.v).BASE_URL+e},null,8,T)))),128))])])),_:1})])),_:1}),(0,u.Wm)(L,{span:8},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"上级栏目"},{default:(0,u.w5)((()=>[(0,u.Wm)(ae,{disabled:""===(0,t.SU)(M).data.type,modelValue:(0,t.SU)(M).data.pid,"onUpdate:modelValue":s[6]||(s[6]=e=>(0,t.SU)(M).data.pid=e),placeholder:""},{default:(0,u.w5)((()=>[(0,u.Wm)(le,{label:"顶级",value:0}),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(z.value,(e=>((0,u.wg)(),(0,u.iD)(u.HY,{key:e.id},["home"!==e.type?((0,u.wg)(),(0,u.j4)(le,{key:0,label:e.name,value:e.id},null,8,["label","value"])):(0,u.kq)("",!0)],64)))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1})])),_:1}),I.value||"cover"!=(0,t.SU)(M).data.type?(0,u.kq)("",!0):((0,u.wg)(),(0,u.j4)(b,{key:1},{default:(0,u.w5)((()=>[(0,u._)("div",E,[(0,u.Wm)((0,t.SU)(a),{class:"editTool",editor:(0,t.SU)(O),defaultConfig:(0,t.SU)(D),mode:(0,t.SU)(q)},null,8,["editor","defaultConfig","mode"]),(0,u.Wm)((0,t.SU)(l),{class:"editCtx",style:{height:"400px"},modelValue:(0,t.SU)(M).data.content,"onUpdate:modelValue":s[7]||(s[7]=e=>(0,t.SU)(M).data.content=e),defaultConfig:(0,t.SU)(x),mode:(0,t.SU)(q),onOnCreated:(0,t.SU)(Y)},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])])),_:1})),(0,u.Wm)(b,null,{default:(0,u.w5)((()=>[K.value?((0,u.wg)(),(0,u.j4)(g,{key:1,type:"primary",onClick:N},{default:(0,u.w5)((()=>[j])),_:1})):((0,u.wg)(),(0,u.j4)(g,{key:0,type:"primary",onClick:J},{default:(0,u.w5)((()=>[C])),_:1}))])),_:1})])])),_:1}),(0,u.Wm)(ue,{label:"SEO"},{default:(0,u.w5)((()=>[(0,u._)("div",null,[(0,u.Wm)(X,null,{default:(0,u.w5)((()=>[(0,u.Wm)(L,null,{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"SEO标题"},{default:(0,u.w5)((()=>[(0,u.Wm)(S,{placeholder:" 非必填",modelValue:(0,t.SU)(M).data.seotitle,"onUpdate:modelValue":s[8]||(s[8]=e=>(0,t.SU)(M).data.seotitle=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,u.Wm)(X,null,{default:(0,u.w5)((()=>[(0,u.Wm)(L,null,{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"SEO关键词"},{default:(0,u.w5)((()=>[(0,u.Wm)(S,{placeholder:" 非必填",modelValue:(0,t.SU)(M).data.keyword,"onUpdate:modelValue":s[9]||(s[9]=e=>(0,t.SU)(M).data.keyword=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,u.Wm)(b,{label:"SEO描述"},{default:(0,u.w5)((()=>[(0,u.Wm)(S,{placeholder:"非必填",modelValue:(0,t.SU)(M).data.desc,"onUpdate:modelValue":s[10]||(s[10]=e=>(0,t.SU)(M).data.desc=e),type:"textarea"},null,8,["modelValue"])])),_:1})])])),_:1})])),_:1})])),_:1},8,["model"])]),(0,u.Wm)(y.Z,{ref:"lib",modelValue:A.value,"onUpdate:modelValue":s[11]||(s[11]=e=>A.value=e),num:Q.value,fatherFun:G},null,8,["modelValue","num"])])}}}),q=a(3744);const D=(0,q.Z)(O,[["__scopeId","data-v-dc91560e"]]);var x=D}}]);